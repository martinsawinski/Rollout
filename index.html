<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Yeti RC ¬∑ Speed & Rollout</title>

  <!-- Reuse FuelCalc styling & assets -->
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/icon-192.png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <link rel="stylesheet" href="../mileage/style.css" />

  <!-- Small structural helpers only (no new colors/typography) -->
  <style>
      .grid-2 { display:grid; grid-template-columns: 1fr 1fr; gap: 20px; }
      .span-2 { grid-column: 1 / -1; }
      .center-field { display:flex; flex-direction:column; align-items:center; }
      .center-field .field-wrap { width: 100%; max-width: 300px; }
      .kv { display:flex; justify-content:space-between; gap:12px; margin:8px 0; }
      .result-box {
        margin: 20px 0 30px; padding: 20px 20px 30px;
        background: #eef3fa; border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        font-weight: 500; line-height: 1.5; font-size: 1rem;
        transition: background-color 0.3s;
      }
      body.dark-mode .result-box { background:#303841; }
      .checkbox-row { display:flex; align-items:center; gap:8px; margin:-10px 0px 30px; }
      input[type="checkbox"] { inline-size: 18px; block-size: 18px; }
      .dimmed { opacity:.5; }
      .hidden { display:none; }
      
      .delta-block {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }
      .delta-value {
        font-size: 1.4rem;
        font-weight: bold;
        margin-top: 6px;
      }
      
      .delta-positive { color: #2e7d32; }  /* green */
      .delta-negative { color: #c62828; }  /* red */
      .delta-neutral  { color: #666; }     /* gray */
      
    </style>
  </head>
<body>
  <!-- Flyout overlay + panel -->
  <div id="flyoutOverlay" class="flyout-overlay" hidden></div>
  <nav id="flyoutPanel" class="flyout-panel" aria-hidden="true" aria-label="FuelCalc menu">
    <div class="flyout-header">
      <span>Yeti RC Tools</span>
      <button id="flyoutClose" class="icon-btn" aria-label="Close menu">‚úï</button>
    </div>
    <div class="flyout-links">
      <a class="menu-link" href="#">üè† Home</a>
      <a class="menu-link" href="../mileage/index.html">‚õΩ Fuel Calculator </a>
      <a class="menu-link" href="../gearing/index.html" aria-current="page">‚öôÔ∏è Gearing & Rollout</a>
    <div class="flyout-footer">
      <small>v<span id="flyoutVersion">‚Äî</span></small>
    </div>
  </nav>

  <div class="header">
    <img src="../mileage/icons/Yeti-RC-FuelCalc-Logo.png" alt="Logo" class="logo" />
    <!-- Hamburger button (right side) -->
    <button id="flyoutOpen"
            class="icon-btn"
            aria-label="Open menu"
            aria-controls="flyoutPanel"
            aria-expanded="false"
            style="position:absolute; right:16px; top:18px; background:none; border:none; font-size:24px; cursor:pointer;">
      ‚ò∞
    </button>
  </div>
    <div class="container">
    <h2>Speed & Rollout</h2>
      <div class="grid-2">
        <div>
          <h3>Current</h3>
          <<label>Pinion
              <input id="g_new_pinion" type="number" min="5" value="20"
                     class="pinion-picker" data-context="new" readonly />
            </label>
          <label>Spur
            <input id="g_cur_spur" type="number" min="1" step="1" placeholder="e.g., 48">
          </label>
        </div>

        <div>
          <h3>New</h3>
          <label>Pinion
            <input id="g_new_pinion" type="number" min="5" value="20"
                   class="pinion-picker" data-context="new" readonly />
          </label>
          <label>Spur
            <input id="g_new_spur" type="number" min="1" step="1" placeholder="e.g., 48">
          </label>
        </div>

        <!-- Centered Internal Ratio -->
        <div class="span-2 center-field">
          <div class="field-wrap">
            <label id="g_internal_label">Internal Ratio
              <input id="g_internal" type="number" step="0.001" value="3.333">
            </label>
            <div class="checkbox-row">
              <input id="g_no_transmission" type="checkbox">
              <span>No transmission, just pinion/spur.</span>
            </div>
          </div>
        </div>
      </div>

      <div class="grid-2">
        <div>
          <label>Tire Diameter (mm)
            <input id="g_cur_tire" type="number" step="0.1" placeholder="e.g., 109">
          </label>
        </div>
        <div>
          <label>Tire Diameter (mm)
            <input id="g_new_tire" type="number" step="0.1" placeholder="e.g., 109">
          </label>
        </div>
      </div>

      <!-- Results -->
      <div class="grid-2">
        <div id="block_current" class="result-box hidden">
          <h3>Current Results</h3>
          <div class="kv"><span>Gear Ratio</span><b id="g_cur_sp"></b></div>
          <div class="kv"><span>FDR</span><b id="g_cur_fdr"></b></div>
          <div class="kv"><span>Rollout</span><b id="g_cur_roll"></b></div>
        </div>

        <div id="block_new" class="result-box hidden">
          <h3>New Results</h3>
          <div class="kv"><span>Gear Ratio</span><b id="g_new_sp"></b></div>
          <div class="kv"><span>FDR</span><b id="g_new_fdr"></b></div>
          <div class="kv"><span>Rollout</span><b id="g_new_roll"></b></div>
        </div>
      </div>

      <div id="block_delta" class="result-box hidden">
           <div class="grid-2">
             <div class="delta-block">
               <div>% Change in FDR</div>
               <div class="delta-value" id="g_delta_fdr"></div>
             </div>
             <div class="delta-block">
               <div>% Change in Rollout</div>
               <div class="delta-value" id="g_delta_roll"></div>
             </div>
           </div>
         </div>

      <div class="mode-toggle">
        <label class="toggle-switch">
          <span>Light</span>
          <input type="checkbox" id="darkModeToggle" />
          <span class="slider"></span>
          <span>Dark</span>
        </label>
      </div>

      <div id="update-notification" style="display:none; position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:#4285f4; color:#fff; padding:12px 20px; border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,0.2); font-weight:bold; cursor:pointer; z-index:1000;">
        A new version is available. Click to update.
      </div>

      <footer class="app-footer">
        App Version ‚Äî <span id="appVersion"></span>
      </footer>

      <!-- Pinion Picker Overlay -->
      <div id="pinionOverlay" aria-hidden="true">
        <div class="pp-backdrop"></div>
        <div class="pp-sheet" role="dialog" aria-modal="true" aria-labelledby="ppTitle">
          <header class="pp-header">
            <button id="ppBack" aria-label="Close">‚Üê</button>
            <h2 id="ppTitle">Choose Pinion</h2>
            <div style="width:40px"></div>
          </header>

          <div class="pp-table-wrap">
            <table class="pp-table" aria-describedby="ppTitle">
              <thead>
                <tr>
                  <th>PINION</th>
                  <th>RATIO</th>
                  <th>FDR</th>
                  <th>ROLLOUT</th>
                </tr>
              </thead>
              <tbody id="ppRows"><!-- rows injected --></tbody>
            </table>
          </div>
        </div>
      </div>

    <script src="gear-speed.js"></script>
  </body>
  </html>
